import{a as L,A as q,i as w}from"./assets/vendor-B3sBNmPP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();const P="https://furniture-store-v2.b.goit.study/api/",u=document.querySelector(".header"),$=document.querySelector(".burger-btn"),I=document.querySelector(".close-btn"),M=document.querySelector(".close-btn-tablet"),T=document.querySelector(".overlay"),_=document.querySelector(".js-review");document.querySelector(".review-stars");const g=document.querySelector(".button-review-left"),p=document.querySelector(".button-review-right"),j="feedbacks";let f=[],a=0;function h(){const e=window.innerWidth;if(e<768)return 1;if(e>=768&&e<1440)return 2;if(e>=1440)return 3}async function O(e=1){return(await L.get(`${P}${j}`,{params:{page:e}})).data.feedbacks}function A(e){const t=Math.floor(e),r=e%1>=.5,s=5-t-(r?1:0);let o="";for(let n=0;n<t;n++)o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="./img/icons.svg#icon-star-fill"></use>
      </svg>
    `;r&&(o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="./img/icons.svg#icon-star-half"></use>
      </svg>
    `);for(let n=0;n<s;n++)o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="./img/icons.svg#icon-star-blank"></use>
      </svg>
    `;return`<div class="review-stars">${o}</div>`}function N(e){return e>3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e)}function x(e){return e.map(({rate:t,descr:r,name:s})=>{const o=N(t);return`
    <li class="review-exemplar">
      ${A(o)}
      <p class="text-review">${r}</p>
      <p class="review-author">${s}</p>
    </li>
  `}).join("")}function v(){const e=h(),t=a*e,r=t+e,s=f.slice(t,r);_.innerHTML="",_.insertAdjacentHTML("beforeend",x(s)),C()}function C(){const e=h(),t=Math.ceil(f.length/e);g&&(g.disabled=a===0),p&&(p.disabled=a>=t-1)}function F(){a>0&&(a--,v())}function R(){const e=h(),t=Math.ceil(f.length/e);a<t-1&&(a++,v())}function B(){const e=h(),t=Math.ceil(f.length/e);a>=t&&(a=Math.max(0,t-1)),v()}async function z(e=1){try{f=await O(e),a=0,v(),g&&g.addEventListener("click",F),p&&p.addEventListener("click",R),window.addEventListener("resize",B)}catch(t){console.error("Помилка при завантаженні відгуків:",t)}}u.addEventListener("click",D);document.addEventListener("keydown",e=>{e.key==="Escape"&&u.classList.contains("menu-open")&&(u.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});function D(e){if($.contains(e.target))u.classList.add("menu-open"),document.body.classList.add("no-scroll");else if(I.contains(e.target)||M.contains(e.target)||T.contains(e.target))u.classList.remove("menu-open"),document.body.classList.remove("no-scroll");else return}window.addEventListener("resize",()=>{window.innerWidth>=1440&&u.classList.contains("menu-open")&&(u.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});document.addEventListener("DOMContentLoaded",()=>{new q("#faq-accordion",{duration:300,collapse:!0,showMultiple:!1,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel"})});const c=document.querySelector(".modal-overlay"),l=c==null?void 0:c.querySelector(".modal-form");let y={};function H({modelId:e="",color:t=""}={}){c&&(y={modelId:e,color:t},c.classList.add("is-open"),document.body.style.overflow="hidden")}function b(){c&&(c.classList.remove("is-open"),document.body.style.overflow="",y={})}document.addEventListener("click",e=>{var n,m;const t=e.target.closest(".modal-sub-btn");if(!t)return;const r=document.querySelector(".prod-modal-window"),s=(r==null?void 0:r.dataset.modelId)||t.dataset.modelId||"682f9bbf8acbdf505592ac42",o=((n=document.querySelector('input[name="product-color"]:checked'))==null?void 0:n.value)||"";(m=document.querySelector(".prod-modal-overlay"))==null||m.classList.remove("is-open"),console.log(s,o),H({modelId:s,color:o})});var k;(k=c==null?void 0:c.querySelector(".modal-close"))==null||k.addEventListener("click",b);c==null||c.addEventListener("click",e=>e.target===c&&b());document.addEventListener("keydown",e=>e.key==="Escape"&&(c==null?void 0:c.classList.contains("is-open"))&&b());l==null||l.addEventListener("submit",async e=>{if(e.preventDefault(),!l.checkValidity()){l.reportValidity();return}const t=new FormData(l),r={name:(t.get("name")||"").toString().trim(),phone:(t.get("phone")||"").toString().trim(),modelId:y.modelId,color:y.color,comment:(t.get("comment")||"").toString().trim()};try{const s=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const n=await s.json().catch(()=>({}));w.error({title:"Помилка",message:n.message||`${s.status} ${s.statusText}`});return}const o=await s.json();w.success({title:"Успіх",message:`Замовлення прийнято. Номер: ${o.orderNum}`}),l.reset(),b()}catch(s){w.error({title:"Помилка мережі",message:s.message})}});const E="https://furniture-store-v2.b.goit.study/api",d={categories:document.querySelector(".furniture-categories__list"),products:document.querySelector(".products-grid.furniture-list-js"),more:document.querySelector(".furniture__load-more")},U={soft:"М'які меблі",wardrobes:"Шафи та системи зберігання",beds:"Ліжка та матраци",tables:"Столи",chairs:"Стільці та табурети",kitchens:"Кухні",kids:"Меблі для дитячої",office:"Меблі для офісу",hallway:"Меблі для передпокою",bathroom:"Меблі для ванної кімнати",outdoor:"Садові та вуличні меблі",decor:"Декор та аксесуари"};let i={categoryId:"",page:1,limit:8,total:0};const W=()=>L.get(`${E}/categories`).then(e=>e.data),V=()=>L.get(`${E}/furnitures`,{params:{page:i.page,limit:i.limit,...i.categoryId?{category:i.categoryId}:{}}}).then(e=>e.data),J=e=>new Intl.NumberFormat("uk-UA").format(e)+" грн",K=e=>(e||[]).slice(0,3).map(t=>`<li class="color-dot" style="background:${t}"></li>`).join(""),G=({_id:e,name:t,images:r=[],price:s,color:o=[]})=>`
<li class="product-card" data-id="${e}">
  <div class="product-card__media">
    <img class="product-card__img" src="${r[0]||""}" alt="${t}" loading="lazy">
  </div>
  <div class="product-card__body">
    <h3 class="product-card__title" title="${t}">${t}</h3>
    <ul class="product-card__colors">${K(o)}</ul>
    <p class="product-card__price">${J(s)}</p>
    <button class="product-card__btn" type="button">Детальніше</button>
  </div>
</li>`;async function Q(){const e=Object.fromEntries((await W()).map(t=>[t.name,t._id]));d.categories.querySelectorAll(".category-chip").forEach(t=>{if(t.classList.contains("category-chip--all"))return;const r=[...t.classList].find(o=>o.startsWith("category-chip--")).replace("category-chip--",""),s=U[r];t.querySelector(".furniture-categories__js").textContent=s,t.dataset.categoryId=e[s]||""})}async function S(e=!0){const{furnitures:t,totalItems:r}=await V();i.total=r;const s=t.map(G).join("");e?d.products.innerHTML=s:d.products.insertAdjacentHTML("beforeend",s);const o=d.products.children.length;d.more.style.display=o<i.total?"":"none"}d.categories.addEventListener("click",e=>{const t=e.target.closest(".category-chip");t&&(d.categories.querySelectorAll(".active-frame").forEach(r=>r.classList.remove("active-frame")),t.classList.add("active-frame"),i.categoryId=t.dataset.categoryId||"",i.page=1,S(!0))});d.more.addEventListener("click",()=>{i.page+=1,S(!1)});(async function(){await Q(),await S(!0)})();z();
//# sourceMappingURL=index.js.map

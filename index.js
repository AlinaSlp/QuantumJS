import{a as I,A as R,i as p}from"./assets/vendor-B3sBNmPP.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const g of s.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const z="https://furniture-store-v2.b.goit.study/api/",m=document.querySelector(".header"),H=document.querySelector(".burger-btn"),F=document.querySelector(".close-btn"),B=document.querySelector(".close-btn-tablet"),U=document.querySelector(".overlay"),O=document.querySelector(".js-review");document.querySelector(".review-stars");const h=document.querySelector(".button-review-left"),b=document.querySelector(".button-review-right"),M=document.querySelector(".furniture-categories__list"),d=document.querySelector(".products-grid.furniture-list-js"),f=document.querySelector(".furniture__load-more"),v=document.querySelector("#loader"),w=document.querySelector(".prod-modal-overlay"),i=document.querySelector(".prod-modal-window"),V=document.querySelector(".close-modal-btn"),W=document.querySelector(".products-grid.furniture-list-js");document.querySelector(".modal-overlay");const _="/QuantumJS/assets/icons-fSjz1rIH.svg",J="feedbacks";let y=[],l=0;function S(){const e=window.innerWidth;if(e<768)return 1;if(e>=768&&e<1440)return 2;if(e>=1440)return 3}async function K(e=1){return(await I.get(`${z}${J}`,{params:{limit:10,page:e}})).data.feedbacks}function Q(e){const t=Math.floor(e),r=e%1>=.5,n=5-t-(r?1:0);let o="";for(let s=0;s<t;s++)o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="${_}#icon-star-fill"></use>
      </svg>`;r&&(o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="${_}#icon-star-half"></use>
      </svg>`);for(let s=0;s<n;s++)o+=`
      <svg width="20" height="20" class="star-icon">
        <use href="${_}#icon-star-blank"></use>
      </svg>`;return`<div class="review-stars">${o}</div>`}function G(e){return e>3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e)}function X(e){return e.map(({rate:t,descr:r,name:n})=>{const o=G(t);return`
    <li class="review-exemplar">
      ${Q(o)}
      <p class="text-review">${r}</p>
      <p class="review-author">${n}</p>
    </li>
  `}).join("")}function E(){const e=S(),t=l*e,r=t+e,n=y.slice(t,r);O.innerHTML="",O.insertAdjacentHTML("beforeend",X(n)),Y()}function Y(){const e=S(),t=Math.ceil(y.length/e);h&&(h.disabled=l===0),b&&(b.disabled=l>=t-1)}function Z(){l>0&&(l--,E())}function D(){const e=S(),t=Math.ceil(y.length/e);l<t-1&&(l++,E())}function ee(){const e=S(),t=Math.ceil(y.length/e);l>=t&&(l=Math.max(0,t-1)),E()}async function te(e=1){try{y=(await K(e)).slice(0,10),l=0,E(),h&&h.addEventListener("click",Z),b&&b.addEventListener("click",D),window.addEventListener("resize",ee)}catch(t){console.error("Помилка при завантаженні відгуків:",t)}}m.addEventListener("click",oe);document.addEventListener("keydown",e=>{e.key==="Escape"&&m.classList.contains("menu-open")&&(m.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});function oe(e){if(H.contains(e.target))m.classList.add("menu-open"),document.body.classList.add("no-scroll");else if(F.contains(e.target)||B.contains(e.target)||U.contains(e.target))m.classList.remove("menu-open"),document.body.classList.remove("no-scroll");else return}window.addEventListener("resize",()=>{window.innerWidth>=1440&&m.classList.contains("menu-open")&&(m.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});document.addEventListener("DOMContentLoaded",()=>{new R("#faq-accordion",{duration:300,collapse:!0,showMultiple:!1,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel"})});const c=document.querySelector(".modal-overlay"),u=c==null?void 0:c.querySelector(".modal-form");let L={};function re({modelId:e="",color:t=""}={}){c&&(L={modelId:e,color:t},c.classList.add("is-open"),document.body.style.overflow="hidden")}function q(){c&&(c.classList.remove("is-open"),document.body.style.overflow="",L={})}var x;(x=c==null?void 0:c.querySelector(".modal-close"))==null||x.addEventListener("click",q);c==null||c.addEventListener("click",e=>e.target===c&&q());document.addEventListener("keydown",e=>e.key==="Escape"&&(c==null?void 0:c.classList.contains("is-open"))&&q());u==null||u.addEventListener("submit",async e=>{if(e.preventDefault(),!u.checkValidity()){u.reportValidity();return}const t=new FormData(u),r={name:(t.get("name")||"").toString().trim(),phone:(t.get("phone")||"").toString().trim(),modelId:L.modelId,color:L.color,comment:(t.get("comment")||"").toString().trim()};console.log(r);try{const n=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok){const s=await n.json().catch(()=>({}));p.error({title:"Помилка",message:s.message||`${n.status} ${n.statusText}`});return}const o=await n.json();p.success({title:"Успіх",message:`Замовлення прийнято. Номер: ${o.orderNum}`}),u.reset(),q()}catch(n){p.error({title:"Помилка мережі",message:n.message})}});document.addEventListener("DOMContentLoaded",()=>{"scrollRestoration"in history&&(history.scrollRestoration="manual"),window.scrollTo({top:0,left:0,behavior:"auto"})});const A="https://furniture-store-v2.b.goit.study/api",ne={soft:"М'які меблі",wardrobes:"Шафи та системи зберігання",beds:"Ліжка та матраци",tables:"Столи",chairs:"Стільці та табурети",kitchens:"Кухні",kids:"Меблі для дитячої",office:"Меблі для офісу",hallway:"Меблі для передпокою",bathroom:"Меблі для ванної кімнати",outdoor:"Садові та вуличні меблі",decor:"Декор та аксесуари"};function P(e){p.error({title:"Помилка",message:e,position:"topRight"})}function se(){p.show({message:"Це всі товари у розділі «Всі товари».",position:"topRight"})}function ce(){const e=d&&d.children.length<a.total;f&&(f.hidden=!e)}function T(){v&&(v.hidden=!1),f&&(f.hidden=!0)}function C(){v&&(v.hidden=!0),ce()}let a={categoryId:"",page:1,limit:8,total:0};async function ie(){const{data:e}=await I.get(`${A}/categories`);return e}async function ae(){const e={page:a.page,limit:a.limit};a.categoryId&&(e.category=a.categoryId);const{data:t}=await I.get(`${A}/furnitures`,{params:e});return t}const le=e=>new Intl.NumberFormat("uk-UA").format(e)+" грн",de=e=>(e||[]).slice(0,3).map(t=>`<li class="color-dot" style="background:${t}"></li>`).join(""),ue=({_id:e,name:t,images:r=[],price:n,color:o=[]})=>`
<li class="product-card" data-id="${e}">
  <div class="product-card__media">
    <img class="product-card__img" src="${r[0]||""}" alt="${t}" loading="lazy">
  </div>
  <div class="product-card__body">
    <h3 class="product-card__title" title="${t}">${t}</h3>
    <ul class="product-card__colors">${de(o)}</ul>
    <p class="product-card__price">${le(n)}</p>
    <button class="product-card__btn" type="button">Детальніше</button>
  </div>
</li>`;async function fe(){const e=await ie(),t=Object.fromEntries(e.map(r=>[r.name,r._id]));M.querySelectorAll(".category-chip").forEach(r=>{var g;if(r.classList.contains("category-chip--all"))return;const n=(g=[...r.classList].find(N=>N.startsWith("category-chip--")))==null?void 0:g.replace("category-chip--",""),o=ne[n],s=r.querySelector(".furniture-categories__js");if(!o||!s){r.disabled=!0;return}s.textContent=o,r.dataset.categoryId=t[o]||""})}async function j(e=!0){const{furnitures:t,totalItems:r}=await ae();a.total=r;const n=t.map(ue).join("");e?d.innerHTML=n:d.insertAdjacentHTML("beforeend",n)}M.addEventListener("click",async e=>{const t=e.target.closest(".category-chip");if(t){M.querySelectorAll(".active-frame").forEach(r=>r.classList.remove("active-frame")),t.classList.add("active-frame"),a.categoryId=t.dataset.categoryId||"",a.page=1;try{T(),d.innerHTML="",await j(!0)}catch{P("Не вдалося завантажити товари цієї категорії. Спробуйте пізніше.")}finally{C()}}});f.addEventListener("click",async()=>{a.page+=1,f.disabled=!0,T();try{const e=d.children.length;await j(!1);const t=d.children[e];t&&t.scrollIntoView({behavior:"smooth",block:"start"}),d.children.length>=a.total&&a.categoryId===""&&se()}catch{P("Не вдалося завантажити додаткові товари. Спробуйте знову.")}finally{f.disabled=!1,C()}});(async function(){try{T(),await fe(),await j(!0)}catch{P("Помилка ініціалізації. Оновіть сторінку або спробуйте пізніше.")}finally{C()}})();function me(e){var n;w.classList.remove("is-close"),document.body.style.overflow="hidden",i.querySelector(".prod-name").textContent=e.name||"Без назви",i.querySelector(".prod-category").textContent=((n=e.category)==null?void 0:n.name)||"Категорія",i.querySelector(".prod-price").textContent=new Intl.NumberFormat("uk-UA").format(e.price||0)+" грн",i.querySelector(".prod-descr").textContent=e.description||"Опис відсутній",i.querySelector(".prod-size").textContent=e.size?`Розміри: ${e.size}`:"";const t=i.querySelector(".image-cont");t.innerHTML=(e.images||[]).slice(0,3).map(o=>`<img src="${o}" alt="${e.name}" class="image-modal">`).join("");const r=i.querySelector(".color-btns");r.innerHTML=(e.color||[]).slice(0,3).map((o,s)=>`<input class="color-btn" type="radio" name="product-color" value="${o}" ${s===0?"checked":""} style="background:${o}">`).join(""),e._id&&(i.dataset.modelId=e._id)}function k(){w.classList.add("is-close"),document.body.style.overflow=""}V.addEventListener("click",k);w.addEventListener("click",e=>{e.target===w&&k()});window.addEventListener("keydown",e=>{e.key==="Escape"&&k()});const $=i.querySelector(".modal-sub-btn");$==null||$.addEventListener("click",()=>{var r;const e=i.dataset.modelId;if(!e)return;const t=((r=i.querySelector('input[name="product-color"]:checked'))==null?void 0:r.value)||"";k(),re({modelId:e,color:t})});W.addEventListener("click",async e=>{const t=e.target.closest(".product-card__btn");if(!t)return;const n=t.closest(".product-card").dataset.id;try{const s=await(await fetch(`https://furniture-store-v2.b.goit.study/api/furnitures/${n}`)).json();me(s)}catch(o){console.error("Помилка при завантаженні даних продукту:",o)}});te();document.addEventListener("pointerdown",e=>{const t=e.target.closest(".button");t&&setTimeout(()=>t.blur(),0)});
//# sourceMappingURL=index.js.map

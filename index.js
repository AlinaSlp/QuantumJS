import{a as g,A as v,i as f}from"./assets/vendor-B3sBNmPP.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}})();const w="https://furniture-store-v2.b.goit.study/api/",S=document.querySelector(".js-review");async function _(t=1){try{const e=await g.get(`${w}feedbacks`),s=Array.isArray(e.data.feedbacks);return console.log("API response:",e.data.feedbacks),e.data}catch(e){return console.error("Помилка при завантаженні відгуків:",e),[]}}function k(t){S.innerHTML=t.map(({rating:e,comment:s,name:r})=>`
    <li class="review-exemplar">
      <p class="review-stars" data-rating="${e}">${e}</p>
      <p class="text-review">${s}</p>
      <p class="review-author">${r}</p>
    </li>
  `).join("")}async function b(){const t=await _();k(t)}b();const l=document.querySelector(".header"),q=document.querySelector(".burger-btn"),E=document.querySelector(".close-btn"),$=document.querySelector(".close-btn-tablet"),A=document.querySelector(".overlay");l.addEventListener("click",I);document.addEventListener("keydown",t=>{t.key==="Escape"&&l.classList.contains("menu-open")&&(l.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});function I(t){if(q.contains(t.target))l.classList.add("menu-open"),document.body.classList.add("no-scroll");else if(E.contains(t.target)||$.contains(t.target)||A.contains(t.target))l.classList.remove("menu-open"),document.body.classList.remove("no-scroll");else return}window.addEventListener("resize",()=>{window.innerWidth>=1440&&l.classList.contains("menu-open")&&(l.classList.remove("menu-open"),document.body.classList.remove("no-scroll"))});document.addEventListener("DOMContentLoaded",()=>{new v("#faq-accordion",{duration:300,collapse:!0,showMultiple:!1,elementClass:"ac",triggerClass:"ac-trigger",panelClass:"ac-panel"})});const c=document.querySelector(".modal-overlay"),d=c==null?void 0:c.querySelector(".modal-form");let m={};function j({modelId:t="",color:e=""}={}){c&&(m={modelId:t,color:e},c.classList.add("is-open"),document.body.style.overflow="hidden")}function p(){c&&(c.classList.remove("is-open"),document.body.style.overflow="",m={})}document.addEventListener("click",t=>{var n,u;const e=t.target.closest(".modal-sub-btn");if(!e)return;const s=document.querySelector(".prod-modal-window"),r=(s==null?void 0:s.dataset.modelId)||e.dataset.modelId||"682f9bbf8acbdf505592ac42",o=((n=document.querySelector('input[name="product-color"]:checked'))==null?void 0:n.value)||"";(u=document.querySelector(".prod-modal-overlay"))==null||u.classList.remove("is-open"),console.log(r,o),j({modelId:r,color:o})});var h;(h=c==null?void 0:c.querySelector(".modal-close"))==null||h.addEventListener("click",p);c==null||c.addEventListener("click",t=>t.target===c&&p());document.addEventListener("keydown",t=>t.key==="Escape"&&(c==null?void 0:c.classList.contains("is-open"))&&p());d==null||d.addEventListener("submit",async t=>{if(t.preventDefault(),!d.checkValidity()){d.reportValidity();return}const e=new FormData(d),s={name:(e.get("name")||"").toString().trim(),phone:(e.get("phone")||"").toString().trim(),modelId:m.modelId,color:m.color,comment:(e.get("comment")||"").toString().trim()};try{const r=await fetch("https://furniture-store-v2.b.goit.study/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok){const n=await r.json().catch(()=>({}));f.error({title:"Помилка",message:n.message||`${r.status} ${r.statusText}`});return}const o=await r.json();f.success({title:"Успіх",message:`Замовлення прийнято. Номер: ${o.orderNum}`}),d.reset(),p()}catch(r){f.error({title:"Помилка мережі",message:r.message})}});const L="https://furniture-store-v2.b.goit.study/api",i={categories:document.querySelector(".furniture-categories__list"),products:document.querySelector(".products-grid.furniture-list-js"),more:document.querySelector(".furniture__load-more")},O={soft:"М'які меблі",wardrobes:"Шафи та системи зберігання",beds:"Ліжка та матраци",tables:"Столи",chairs:"Стільці та табурети",kitchens:"Кухні",kids:"Меблі для дитячої",office:"Меблі для офісу",hallway:"Меблі для передпокою",bathroom:"Меблі для ванної кімнати",outdoor:"Садові та вуличні меблі",decor:"Декор та аксесуари"};let a={categoryId:"",page:1,limit:8,total:0};const C=()=>g.get(`${L}/categories`).then(t=>t.data),T=()=>g.get(`${L}/furnitures`,{params:{page:a.page,limit:a.limit,...a.categoryId?{category:a.categoryId}:{}}}).then(t=>t.data),M=t=>new Intl.NumberFormat("uk-UA").format(t)+" грн",N=t=>(t||[]).slice(0,3).map(e=>`<li class="color-dot" style="background:${e}"></li>`).join(""),P=({_id:t,name:e,images:s=[],price:r,color:o=[]})=>`
<li class="product-card" data-id="${t}">
  <div class="product-card__media">
    <img class="product-card__img" src="${s[0]||""}" alt="${e}" loading="lazy">
  </div>
  <div class="product-card__body">
    <h3 class="product-card__title" title="${e}">${e}</h3>
    <ul class="product-card__colors">${N(o)}</ul>
    <p class="product-card__price">${M(r)}</p>
    <button class="product-card__btn" type="button">Детальніше</button>
  </div>
</li>`;async function B(){const t=Object.fromEntries((await C()).map(e=>[e.name,e._id]));i.categories.querySelectorAll(".category-chip").forEach(e=>{if(e.classList.contains("category-chip--all"))return;const s=[...e.classList].find(o=>o.startsWith("category-chip--")).replace("category-chip--",""),r=O[s];e.querySelector(".furniture-categories__js").textContent=r,e.dataset.categoryId=t[r]||""})}async function y(t=!0){const{furnitures:e,totalItems:s}=await T();a.total=s;const r=e.map(P).join("");t?i.products.innerHTML=r:i.products.insertAdjacentHTML("beforeend",r);const o=i.products.children.length;i.more.style.display=o<a.total?"":"none"}i.categories.addEventListener("click",t=>{const e=t.target.closest(".category-chip");e&&(i.categories.querySelectorAll(".active-frame").forEach(s=>s.classList.remove("active-frame")),e.classList.add("active-frame"),a.categoryId=e.dataset.categoryId||"",a.page=1,y(!0))});i.more.addEventListener("click",()=>{a.page+=1,y(!1)});(async function(){await B(),await y(!0)})();b();
//# sourceMappingURL=index.js.map

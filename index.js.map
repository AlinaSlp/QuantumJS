{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/feedback.js","../src/js/header.js","../src/js/faq.js","../src/js/order-modal.js","../src/js/furniture-list.js","../src/main.js"],"sourcesContent":["// API ендпоінти:\n// https://furniture-store-v2.b.goit.study/api/categories - фільтрація по категоріям\n// https://furniture-store-v2.b.goit.study/api/furniture - картки з меблями\n// https://furniture-store-v2.b.goit.study/api/feedbacks - картки з відгуками\n// **  ДОДАТКОВІ ЗАВДАННЯ  **\n//  https://furniture-store-v2.b.goit.study/api/orders - форма з замовленням\n// https://furniture-store-v2.b.goit.study/api/furniture?type=popular - картки з популярними товарами\n\n\nexport const BASE_URL = \"https://furniture-store-v2.b.goit.study/api/\";","export const header = document.querySelector('.header');\nexport const burgerButton = document.querySelector('.burger-btn');\nexport const closeButton = document.querySelector('.close-btn');\nexport const closeButtonTablet = document.querySelector('.close-btn-tablet');\nexport const headerBackdrop = document.querySelector('.overlay');\nexport const reviewsContainer = document.querySelector('.js-review');\nexport const containerWthStars = document.querySelector('.review-stars');\nexport const buttonReviewLeft = document.querySelector('.button-review-left');\nexport const buttonReviewRight = document.querySelector('.button-review-right');\nexport const categoriesListEl = document.querySelector(\n  '.furniture-categories__list'\n);\nexport const productsListEl = document.querySelector(\n  '.products-grid.furniture-list-js'\n);\nexport const btnLoadMore = document.querySelector('.furniture__load-more');\nexport const loaderEl = document.querySelector('#loader');\n","import { BASE_URL } from './pixabay-api';\nimport axios from 'axios';\nimport { reviewsContainer, buttonReviewLeft, buttonReviewRight } from './refs';\n\nconst END_POINT = 'feedbacks';\n\nlet allFeedbacks = [];\nlet currentPageIndex = 0;\n\nfunction getItemPerPage() {\n  const width = window.innerWidth;\n  if (width < 768) {\n    return 1;\n  }\n  if (width >= 768 && width < 1440) {\n    return 2;\n  }\n  if (width >= 1440) {\n    return 3;\n  }\n}\n\nexport async function loadFeedbacks(page = 1) {\n  const response = await axios.get(`${BASE_URL}${END_POINT}`, {\n    params: { page },\n  });\n  return response.data.feedbacks;\n}\n\nfunction renderStars(rating) {\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating % 1 >= 0.5;\n  const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);\n\n  let starsHTML = '';\n\n  for (let i = 0; i < fullStars; i++) {\n    starsHTML += `\n      <svg width=\"20\" height=\"20\" class=\"star-icon\">\n        <use href=\"../img/icons.svg#icon-star-fill\"></use>\n      </svg>\n    `;\n  }\n\n  if (hasHalfStar) {\n    starsHTML += `\n      <svg width=\"20\" height=\"20\" class=\"star-icon\">\n        <use href=\"../img/icons.svg#icon-star-half\"></use>\n      </svg>\n    `;\n  }\n\n  for (let i = 0; i < emptyStars; i++) {\n    starsHTML += `\n      <svg width=\"20\" height=\"20\" class=\"star-icon\">\n        <use href=\"../img/icons.svg#icon-star-blank\"></use>\n      </svg>\n    `;\n  }\n\n  return `<div class=\"review-stars\">${starsHTML}</div>`;\n}\n\nexport function rating(rating) {\n  if (rating > 3.3 && rating <= 3.7) {\n    return 3.5;\n  }\n  if (rating >= 3.8 && rating <= 4.2) return 4;\n  return Math.round(rating);\n}\n\nexport function renderFeedbacks(feedbacks) {\n  return feedbacks\n    .map(({ rate, descr, name }) => {\n      const normalizedRate = rating(rate);\n      return `\n    <li class=\"review-exemplar\">\n      ${renderStars(normalizedRate)}\n      <p class=\"text-review\">${descr}</p>\n      <p class=\"review-author\">${name}</p>\n    </li>\n  `;\n    })\n    .join('');\n}\n\nfunction displayCurrentPage() {\n  const perPage = getItemPerPage();\n  const startIndex = currentPageIndex * perPage;\n  const endIndex = startIndex + perPage;\n  const currentPageFeedbacks = allFeedbacks.slice(startIndex, endIndex);\n\n  reviewsContainer.innerHTML = '';\n  reviewsContainer.insertAdjacentHTML('beforeend', renderFeedbacks(currentPageFeedbacks));\n\n  updateButtonStates();\n}\n\nfunction updateButtonStates() {\n  const perPage = getItemPerPage();\n  const totalPages = Math.ceil(allFeedbacks.length / perPage);\n\n  if (buttonReviewLeft) {\n    buttonReviewLeft.disabled = currentPageIndex === 0;\n  }\n\n  if (buttonReviewRight) {\n    buttonReviewRight.disabled = currentPageIndex >= totalPages - 1;\n  }\n}\n\n\nfunction goToPreviousPage() {\n  if (currentPageIndex > 0) {\n    currentPageIndex--;\n    displayCurrentPage();\n  }\n}\nfunction goToNextPage() {\n  const perPage = getItemPerPage();\n  const totalPages = Math.ceil(allFeedbacks.length / perPage);\n\n  if (currentPageIndex < totalPages - 1) {\n    currentPageIndex++;\n    displayCurrentPage();\n  }\n}\n\nfunction handleResize() {\n  const perPage = getItemPerPage();\n  const totalPages = Math.ceil(allFeedbacks.length / perPage);\n\n  if (currentPageIndex >= totalPages) {\n    currentPageIndex = Math.max(0, totalPages - 1);\n  }\n\n  displayCurrentPage();\n}\n\nexport async function initReviews(page = 1) {\n  try {\n    const feedbacks = await loadFeedbacks(page);\n    allFeedbacks = feedbacks;\n    currentPageIndex = 0;\n\n    displayCurrentPage();\n\n    if (buttonReviewLeft) {\n      buttonReviewLeft.addEventListener('click', goToPreviousPage);\n    }\n\n    if (buttonReviewRight) {\n      buttonReviewRight.addEventListener('click', goToNextPage);\n    }\n\n    window.addEventListener('resize', handleResize);\n  } catch (error) {\n    console.error('Помилка при завантаженні відгуків:', error);\n  }\n}\n","// IMPORTS\nimport {\n  header,\n  burgerButton,\n  closeButton,\n  closeButtonTablet,\n  headerBackdrop,\n} from './refs';\n\n// EVENT LISTENERS\n\nheader.addEventListener('click', toggleNavMenu);\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape' && header.classList.contains('menu-open')) {\n    header.classList.remove('menu-open');\n    document.body.classList.remove('no-scroll');\n  }\n});\n\n// RENDER\nexport function toggleNavMenu(event) {\n  if (burgerButton.contains(event.target)) {\n    header.classList.add('menu-open');\n    document.body.classList.add('no-scroll');\n  } else if (\n    closeButton.contains(event.target) ||\n    closeButtonTablet.contains(event.target) ||\n    headerBackdrop.contains(event.target)\n  ) {\n    header.classList.remove('menu-open');\n    document.body.classList.remove('no-scroll');\n  } else {\n    return;\n  }\n}\n\nwindow.addEventListener('resize', () => {\n  if (window.innerWidth >= 1440 && header.classList.contains('menu-open')) {\n    header.classList.remove('menu-open');\n    document.body.classList.remove('no-scroll');\n  }\n});","import Accordion from \"accordion-js\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  new Accordion(\"#faq-accordion\", {\n    duration: 300,\n    collapse: true,\n    showMultiple: false,\n    elementClass: \"ac\",\n    triggerClass: \"ac-trigger\",\n    panelClass: \"ac-panel\",\n  });\n});","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst overlay = document.querySelector('.modal-overlay');\nconst form = overlay?.querySelector('.modal-form');\nlet orderData = {};\n\nfunction open({ modelId = '', color = '' } = {}) {\n  if (!overlay) return;\n  orderData = { modelId, color };\n  overlay.classList.add('is-open');\n  document.body.style.overflow = 'hidden';\n}\n\nfunction close() {\n  if (!overlay) return;\n  overlay.classList.remove('is-open');\n  document.body.style.overflow = '';\n  orderData = {};\n}\n\n// Testing only - delete after product model handles submit\ndocument.addEventListener('click', e => {\n  const btn = e.target.closest('.modal-sub-btn');\n  if (!btn) return;\n\n  const prodModal = document.querySelector('.prod-modal-window');\n  const modelId =\n    prodModal?.dataset.modelId ||\n    btn.dataset.modelId ||\n    '682f9bbf8acbdf505592ac42';\n  const color =\n    document.querySelector('input[name=\"product-color\"]:checked')?.value || '';\n\n  document.querySelector('.prod-modal-overlay')?.classList.remove('is-open');\n\n  console.log(modelId, color);\n  open({ modelId, color });\n});\n\noverlay?.querySelector('.modal-close')?.addEventListener('click', close);\noverlay?.addEventListener('click', e => e.target === overlay && close());\ndocument.addEventListener(\n  'keydown',\n  e => e.key === 'Escape' && overlay?.classList.contains('is-open') && close()\n);\n\nform?.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  if (!form.checkValidity()) {\n    form.reportValidity();\n    return;\n  }\n\n  const data = new FormData(form);\n  const payload = {\n    name: (data.get('name') || '').toString().trim(),\n    phone: (data.get('phone') || '').toString().trim(),\n    modelId: orderData.modelId,\n    color: orderData.color,\n    comment: (data.get('comment') || '').toString().trim(),\n  };\n\n  try {\n    const res = await fetch(\n      'https://furniture-store-v2.b.goit.study/api/orders',\n      {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      }\n    );\n\n    if (!res.ok) {\n      const json = await res.json().catch(() => ({}));\n      iziToast.error({\n        title: 'Помилка',\n        message: json.message || `${res.status} ${res.statusText}`,\n      });\n      return;\n    }\n\n    const result = await res.json();\n    iziToast.success({\n      title: 'Успіх',\n      message: `Замовлення прийнято. Номер: ${result.orderNum}`,\n    });\n    form.reset();\n    close();\n  } catch (err) {\n    iziToast.error({ title: 'Помилка мережі', message: err.message });\n  }\n});\n\nexport { open as openOrderModal, close as closeOrderModal };\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  categoriesListEl,\n  productsListEl,\n  btnLoadMore,\n  loaderEl,\n} from './refs';\n\n/* ================= Scroll restoration ================= */\ndocument.addEventListener('DOMContentLoaded', () => {\n  if ('scrollRestoration' in history) history.scrollRestoration = 'manual';\n  window.scrollTo({ top: 0, left: 0, behavior: 'auto' });\n});\n\n/* ================= Config ================= */\nconst BASE_URL = 'https://furniture-store-v2.b.goit.study/api';\n\n/* ================= Category name map ================= */\nconst MOD_TO_NAME = {\n  soft: \"М'які меблі\",\n  wardrobes: 'Шафи та системи зберігання',\n  beds: 'Ліжка та матраци',\n  tables: 'Столи',\n  chairs: 'Стільці та табурети',\n  kitchens: 'Кухні',\n  kids: 'Меблі для дитячої',\n  office: 'Меблі для офісу',\n  hallway: 'Меблі для передпокою',\n  bathroom: 'Меблі для ванної кімнати',\n  outdoor: 'Садові та вуличні меблі',\n  decor: 'Декор та аксесуари',\n};\n\n/* ================= Toast ================= */\nfunction showError(message) {\n  iziToast.error({ title: 'Помилка', message, position: 'topRight' });\n}\nfunction showEndOfAllToast() {\n  iziToast.show({\n    message: 'Це всі товари у розділі «Всі товари».',\n    position: 'topRight',\n  });\n}\n\n/* ================= Loader & Load more sync ================= */\nfunction updateLoadMoreVisibility() {\n  const shouldShow =\n    productsListEl && productsListEl.children.length < state.total;\n  if (btnLoadMore) btnLoadMore.hidden = !shouldShow;\n}\nfunction showLoader() {\n  if (loaderEl) loaderEl.hidden = false;\n  if (btnLoadMore) btnLoadMore.hidden = true;\n}\nfunction hideLoader() {\n  if (loaderEl) loaderEl.hidden = true;\n  updateLoadMoreVisibility();\n}\n\n/* ================= State ================= */\nlet state = { categoryId: '', page: 1, limit: 8, total: 0 };\n\n/* ================= API ================= */\nasync function getCategories() {\n  const { data } = await axios.get(`${BASE_URL}/categories`);\n  return data;\n}\nasync function getFurnitures() {\n  const params = { page: state.page, limit: state.limit };\n  if (state.categoryId) params.category = state.categoryId;\n  const { data } = await axios.get(`${BASE_URL}/furnitures`, { params });\n  return data;\n}\n\n/* ================= Templating ================= */\nconst priceUA = v => new Intl.NumberFormat('uk-UA').format(v) + ' грн';\nconst colors = a =>\n  (a || [])\n    .slice(0, 3)\n    .map(c => `<li class=\"color-dot\" style=\"background:${c}\"></li>`)\n    .join('');\n\nconst card = ({ _id, name, images = [], price, color = [] }) => `\n<li class=\"product-card\" data-id=\"${_id}\">\n  <div class=\"product-card__media\">\n    <img class=\"product-card__img\" src=\"${\n      images[0] || ''\n    }\" alt=\"${name}\" loading=\"lazy\">\n  </div>\n  <div class=\"product-card__body\">\n    <h3 class=\"product-card__title\" title=\"${name}\">${name}</h3>\n    <ul class=\"product-card__colors\">${colors(color)}</ul>\n    <p class=\"product-card__price\">${priceUA(price)}</p>\n    <button class=\"product-card__btn\" type=\"button\">Детальніше</button>\n  </div>\n</li>`;\n\n/* ================= Renderers ================= */\nasync function renderCategories() {\n  const list = await getCategories();\n  const map = Object.fromEntries(list.map(c => [c.name, c._id]));\n\n  categoriesListEl.querySelectorAll('.category-chip').forEach(btn => {\n    if (btn.classList.contains('category-chip--all')) return;\n\n    const mod = [...btn.classList]\n      .find(c => c.startsWith('category-chip--'))\n      ?.replace('category-chip--', '');\n    const name = MOD_TO_NAME[mod];\n\n    const labelEl = btn.querySelector('.furniture-categories__js');\n    if (!name || !labelEl) {\n      btn.disabled = true;\n      return;\n    }\n\n    labelEl.textContent = name;\n    btn.dataset.categoryId = map[name] || '';\n  });\n}\n\nasync function renderProducts(replace = true) {\n  const { furnitures, totalItems } = await getFurnitures();\n  state.total = totalItems;\n\n  const html = furnitures.map(card).join('');\n  if (replace) productsListEl.innerHTML = html;\n  else productsListEl.insertAdjacentHTML('beforeend', html);\n}\n\n/* ================= Events ================= */\ncategoriesListEl.addEventListener('click', async e => {\n  const btn = e.target.closest('.category-chip');\n  if (!btn) return;\n\n  categoriesListEl\n    .querySelectorAll('.active-frame')\n    .forEach(b => b.classList.remove('active-frame'));\n  btn.classList.add('active-frame');\n\n  state.categoryId = btn.dataset.categoryId || '';\n  state.page = 1;\n\n  try {\n    showLoader();\n    productsListEl.innerHTML = '';\n    await renderProducts(true);\n  } catch (err) {\n    showError(\n      'Не вдалося завантажити товари цієї категорії. Спробуйте пізніше.'\n    );\n  } finally {\n    hideLoader();\n  }\n});\n\nbtnLoadMore.addEventListener('click', async () => {\n  state.page += 1;\n\n  btnLoadMore.disabled = true;\n  showLoader();\n  try {\n    const prevCount = productsListEl.children.length;\n    await renderProducts(false);\n\n    const firstNew = productsListEl.children[prevCount];\n    if (firstNew)\n      firstNew.scrollIntoView({ behavior: 'smooth', block: 'start' });\n\n    const noMore = productsListEl.children.length >= state.total;\n    if (noMore && state.categoryId === '') {\n      showEndOfAllToast();\n    }\n  } catch (err) {\n    showError('Не вдалося завантажити додаткові товари. Спробуйте знову.');\n  } finally {\n    btnLoadMore.disabled = false;\n    hideLoader();\n  }\n});\n\n/* ================= Init ================= */\n(async function init() {\n  try {\n    showLoader();\n    await renderCategories();\n    await renderProducts(true);\n  } catch (err) {\n    showError('Помилка ініціалізації. Оновіть сторінку або спробуйте пізніше.');\n  } finally {\n    hideLoader();\n  }\n})();\n","import { loadFeedbacks, renderFeedbacks, initReviews } from './js/feedback';\n\ninitReviews();\nimport { toggleNavMenu } from './js/header';\nimport './js/faq.js';\nimport './js/order-modal.js';\nimport './js/furniture-list.js';\n\ndocument.addEventListener('pointerdown', (e) => {\n  const btn = e.target.closest('.button');\n  if (btn) {\n    setTimeout(() => btn.blur(), 0);\n  }\n});"],"names":["BASE_URL","header","burgerButton","closeButton","closeButtonTablet","headerBackdrop","reviewsContainer","buttonReviewLeft","buttonReviewRight","categoriesListEl","productsListEl","btnLoadMore","loaderEl","END_POINT","allFeedbacks","currentPageIndex","getItemPerPage","width","loadFeedbacks","page","axios","renderStars","rating","fullStars","hasHalfStar","emptyStars","starsHTML","i","renderFeedbacks","feedbacks","rate","descr","name","normalizedRate","displayCurrentPage","perPage","startIndex","endIndex","currentPageFeedbacks","updateButtonStates","totalPages","goToPreviousPage","goToNextPage","handleResize","initReviews","error","toggleNavMenu","event","Accordion","overlay","form","orderData","open","modelId","color","close","btn","prodModal","_a","_b","data","payload","res","json","iziToast","result","err","MOD_TO_NAME","showError","message","showEndOfAllToast","updateLoadMoreVisibility","shouldShow","state","showLoader","hideLoader","getCategories","getFurnitures","params","priceUA","v","colors","a","c","card","_id","images","price","renderCategories","list","map","mod","labelEl","renderProducts","replace","furnitures","totalItems","html","b","prevCount","firstNew"],"mappings":"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"}